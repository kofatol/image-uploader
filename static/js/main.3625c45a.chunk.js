(this["webpackJsonpimage-uploader"]=this["webpackJsonpimage-uploader"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),c=n(7),r=n.n(c),o=(n(14),n(15),n(2)),u=function(){var e=Object(i.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(i.useState)(!1),r=Object(o.a)(c,2),u=r[0],l=r[1],s=Object(i.useState)(!1),g=Object(o.a)(s,2),m=g[0],d=g[1];return{inputValue:n,isTouched:u,isInputEmpty:m,onInputChange:function(e){var t=e.target.value;return a(t)},onInputEnd:function(){l(!0),!n&&d(!0)}}},l=n(6),s=n.n(l),g=n(8),m=function(e){return new Promise((function(t,n){var i=new FileReader;i.readAsDataURL(e),i.onloadend=function(){t(i.result)},i.onerror=function(e){n(e)}}))},d=function(){var e=Object(i.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],c=function(){var e=Object(g.a)(s.a.mark((function e(t){var n,i,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target,void 0===(i=n.files[0])){e.next=7;break}return e.next=5,m(i);case 5:c=e.sent,a(c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{imageSrc:n,onUploadImageClick:function(e){e.currentTarget.nextElementSibling.click()},onFileInputClick:c}},p=n(9),f=function(){var e=Object(i.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],c=b(),r=c.imgWrapperRef,u=c.imgHeight,l=c.imgWidth,s=c.imgX,g=c.imgY;return{labelsInfo:n,onImageClick:function(e){var t=(e.clientX-s)/l,n=(e.clientY-g)/u;a((function(e){var i={id:(100*Math.random()*Math.random()*100).toFixed(3),relativeX:t,relativeY:n};return[].concat(Object(p.a)(e),[i])}))},imgWrapperRef:r,imgHeight:u,imgWidth:l}},b=function(){var e=Object(i.useRef)(null),t=Object(i.useState)({height:0,width:0,y:0,x:0}),n=Object(o.a)(t,2),a=n[0],c=n[1],r=Object(i.useCallback)((function(){var t=e.current.getBoundingClientRect();return{height:t.height,width:t.width,x:t.x,y:t.y}}),[]),u=Object(i.useCallback)((function(){var e=r();c(e)}),[r]);return Object(i.useEffect)((function(){return u(),window.addEventListener("resize",u),function(){return window.removeEventListener("resize",u)}}),[u]),{imgWrapperRef:e,imgX:a.x,imgY:a.y,imgWidth:a.width,imgHeight:a.height}},h=(n(17),n(0));function j(e){var t=e.style,n=u(),i=n.inputValue,a=n.isTouched,c=n.isInputEmpty,r=n.onInputChange,o=n.onInputEnd;return c?null:Object(h.jsx)("div",{style:t,className:"ImageLabel",children:Object(h.jsx)("input",{autoFocus:!0,maxLength:100,value:i,disabled:a,size:i.length,onChange:r,onBlur:o,className:"ImageLabel__input"})})}n(19);function v(e){var t=e.imageSrc,n=f(),i=n.labelsInfo,a=n.onImageClick,c=n.imgWrapperRef,r=n.imgHeight,o=n.imgWidth;return Object(h.jsxs)("div",{className:"ImageContent",ref:c,children:[Object(h.jsx)("img",{src:t,alt:"uploaded",onClick:a,className:"ImageContent__image",onError:function(e){return console.error("Something went wrong: ".concat(e))}}),!!i.length&&i.map((function(e){var t={left:e.relativeX*o,top:e.relativeY*r};return Object(h.jsx)(j,{style:t},e.id)}))]})}n(20);function O(e){var t=e.onUploadImageClick,n=e.onFileInputClick;return Object(h.jsxs)("div",{className:"ImageUploader",children:[Object(h.jsx)("h3",{className:"ImageUploader__text",children:"To upload an image please click on the button below"}),Object(h.jsx)("button",{onClick:t,className:"ImageUploader__button",children:"Upload image"}),Object(h.jsx)("input",{value:"",type:"file",name:"image",accept:"image/*",onChange:n,className:"ImageUploader__input"})]})}function I(){var e=d(),t=e.imageSrc,n=e.onUploadImageClick,i=e.onFileInputClick;return Object(h.jsxs)("div",{className:"App",children:[t&&Object(h.jsx)(v,{imageSrc:t}),!t&&Object(h.jsx)(O,{onFileInputClick:i,onUploadImageClick:n})]})}var x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,22)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),i(e),a(e),c(e),r(e)}))};r.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(I,{})}),document.getElementById("root")),x()}],[[21,1,2]]]);
//# sourceMappingURL=main.3625c45a.chunk.js.map